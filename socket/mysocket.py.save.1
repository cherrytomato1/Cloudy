
import socket

HOST = "172.20.10.11"
PORT = 8080
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
print ('Socket created')
s.bind((HOST, PORT))
print ('Socket bind complete')
s.listen(1)
print ('Socket now listening')


def do_some_stuffs_with_input(input_string):

    if input_string == "left":
        input_string = "left."

    elif input_string == "right":
        input_string = "right."
    elif input_string == "single":
        input_string = "single."
    else :
        input_string = input_string + " ??"
    return input_string

while True:

    conn, addr = s.accept()
    print("Connected by ", addr)

    while True:
        data = conn.recv(1024)
        data = data.decode("utf8").strip()
        if not data: break
        print("Received: " + data)
        
        res = do_some_stuffs_with_input(data)
        print("pi :" + res)
        conn.sendall(res.encode("utf-8"))

    conn.close()
s.close()
